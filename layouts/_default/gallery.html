{{ define "main" }}
<main class="gallery">
    <section class="mt-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-12 mb-5 text-center">
                    <h1>{{.Title}}</h1>
                </div>
                <div class="col-lg-12 mb-5">
                    <div id="bricks" class="mx-auto">
                        {{ $headless := .Site.GetPage "/products" }}
                        {{ range $headless.Resources.ByType "page" }}
                        <div class="bricks-item">
                            <a data-fancybox="gallery" href="{{ .Params.Image }}">
                                <img src="{{ .Params.Image }}" class="img-fluid lazy">
                            </a>
                            <p class="mt-4">{{ .Params.Title }}</p>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
{{ end }}

{{ define "extra-scripts" }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bricks.js/1.8.0/bricks.min.js"
    integrity="sha256-/h69mBYIzhCn/Av84xcH3HB7dFuND11cwTYP3neiwM0=" crossorigin="anonymous"></script>
<script>
    const sizes = [
        {
            columns: 1,
            gutter: 10
        },
        {
            mq: '400px',
            columns: 2,
            gutter: 10
        },
        {
            mq: '768px',
            columns: 3,
            gutter: 25
        },
        {
            mq: '1024px',
            columns: 4,
            gutter: 50
        }
    ]

    const instance = Bricks({
        container: '#bricks',
        packed: 'packed',
        sizes: sizes,
        position: false
    })

    instance.pack()
    instance.update()
    instance.resize(true)
</script>
{{ end }}

{{ define "extra-css" }}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" />
{{ end }}